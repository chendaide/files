import{r as a}from"./request-DczqgLPf.js";import{g as s}from"./user-BBBixgcQ.js";import{_ as e,r as t,n as l,c as r,o as c,h as i,i as n,j as u,k as o,F as d,z as m,b as p,l as v,t as k,C as y,E as f}from"./index-DgsTEpUf.js";const h={class:"blacklist-page"},_={key:1,class:"blacklist-list"},b={class:"user-info"},g=e({__name:"Blacklist",setup(e){const g=t([]),w=async()=>{try{const e=(await a.get("/blacklist")).data||[],t=await Promise.all(e.map(async a=>{try{return{id:a,...(await s(a)).data}}catch{return{id:a,username:`用户${a}`}}}));g.value=t}catch(e){}},j=async s=>{await y.confirm("确定将该用户移出黑名单吗？","提示");try{await function(s){return a.delete(`/blacklist/${s}`)}(s),f.success("已移出黑名单"),w()}catch(e){}};return l(w),(a,s)=>{const e=u("el-empty"),t=u("el-avatar"),l=u("el-button"),y=u("el-card");return c(),r("div",h,[i(y,null,{header:n(()=>[...s[0]||(s[0]=[p("span",null,"黑名单管理",-1)])]),default:n(()=>[g.value.length?(c(),r("div",_,[(c(!0),r(d,null,m(g.value,a=>{return c(),r("div",{key:a.id,class:"blacklist-item"},[i(t,{src:a.avatar,size:50},{default:n(()=>{var s;return[v(k(null==(s=a.username)?void 0:s.charAt(0)),1)]}),_:2},1032,["src"]),p("div",b,[p("h4",null,k(a.username),1),p("p",null,"拉黑时间: "+k((e=a.createTime,e?new Date(e).toLocaleString():"")),1)]),i(l,{type:"danger",size:"small",onClick:s=>j(a.id)},{default:n(()=>[...s[1]||(s[1]=[v(" 移出黑名单 ",-1)])]),_:1},8,["onClick"])]);var e}),128))])):(c(),o(e,{key:0,description:"暂无黑名单用户"}))]),_:1})])}}},[["__scopeId","data-v-c65c408e"]]);export{g as default};
