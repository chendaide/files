import{o as a,q as e,s as l}from"./admin-jtg1Qoei.js";import{_ as t,r as s,n as i,c as o,o as r,b as d,h as n,j as u,e as c,U as p,k as m,i as w,B as v,t as h,l as f,F as b,C as g,E as y}from"./index-DgsTEpUf.js";import"./request-DczqgLPf.js";const _={class:"page"},k={class:"page-header"},I={class:"card"},N={key:1,class:"muted"},P={key:1,class:"muted"},C=t({__name:"VerifyManage",setup(t){const C=s([]),D=s(!1),j=s("PENDING"),x={0:"待审核",1:"已通过",2:"已拒绝"},E=async()=>{D.value=!0;try{const l="PENDING"===j.value?await a():await e();C.value=l.data||[]}finally{D.value=!1}},U=async(a,e)=>{let t="";if(e)await g.confirm("确定通过该用户的实名认证吗？","确认");else{t=(await g.prompt("请输入拒绝原因","审核",{inputPattern:/.+/,inputErrorMessage:"请输入原因"})).value}await l(a.id,e,t),y.success(e?"审核通过":"已拒绝"),E()};return i(E),(a,e)=>{const l=u("el-segmented"),t=u("el-table-column"),s=u("el-image"),i=u("el-button"),g=u("el-table"),y=p("loading");return r(),o("div",_,[d("div",k,[e[1]||(e[1]=d("h1",{class:"page-title"},"实名审核",-1)),n(l,{modelValue:j.value,"onUpdate:modelValue":e[0]||(e[0]=a=>j.value=a),options:[{label:"待审核",value:"PENDING"},{label:"全部",value:"ALL"}],onChange:E},null,8,["modelValue"])]),d("div",I,[c((r(),m(g,{data:C.value},{default:w(()=>[n(t,{prop:"id",label:"ID",width:"70"}),n(t,{prop:"userId",label:"用户ID",width:"90"}),n(t,{prop:"realName",label:"真实姓名",width:"120"}),n(t,{label:"证件照片",width:"100"},{default:w(({row:a})=>[a.idPhotoUrl?(r(),m(s,{key:0,src:a.idPhotoUrl,"preview-src-list":[a.idPhotoUrl],fit:"cover",class:"id-photo"},null,8,["src","preview-src-list"])):(r(),o("span",N,"-"))]),_:1}),n(t,{label:"状态",width:"90",align:"center"},{default:w(({row:a})=>[d("span",{class:v(["status",["s"+a.status]])},h(x[a.status]),3)]),_:1}),n(t,{prop:"createTime",label:"申请时间",width:"170"},{default:w(({row:a})=>[f(h(a.createTime?new Date(a.createTime).toLocaleString():"-"),1)]),_:1}),n(t,{prop:"rejectReason",label:"拒绝原因","min-width":"140","show-overflow-tooltip":""}),n(t,{label:"操作",width:"160",fixed:"right"},{default:w(({row:a})=>[0===a.status?(r(),o(b,{key:0},[n(i,{type:"primary",size:"small",text:"",onClick:e=>U(a,!0)},{default:w(()=>[...e[2]||(e[2]=[f("通过",-1)])]),_:1},8,["onClick"]),n(i,{type:"danger",size:"small",text:"",onClick:e=>U(a,!1)},{default:w(()=>[...e[3]||(e[3]=[f("拒绝",-1)])]),_:1},8,["onClick"])],64)):(r(),o("span",P,"已处理"))]),_:1})]),_:1},8,["data"])),[[y,D.value]])])])}}},[["__scopeId","data-v-3d67e782"]]);export{C as default};
