import{m as a,n as e,p as t}from"./admin-jtg1Qoei.js";import{_ as l,r as s,n as o,c as i,o as n,b as p,h as r,j as d,e as u,U as c,k as m,i as v,t as w,B as b,F as f,l as g,C as h,E as y}from"./index-DgsTEpUf.js";import"./request-DczqgLPf.js";const _={class:"page"},k={class:"page-header"},C={class:"card"},x={class:"type-tag"},R={key:1,class:"muted"},j=l({__name:"ReportManage",setup(l){const j=s([]),D=s(!1),E=s(!0),I={USER:"用户",PRODUCT:"商品",ORDER:"订单"},U={0:"待处理",1:"已通过",2:"已驳回"},V=async()=>{D.value=!0;try{const t=E.value?await a():await e();j.value=t.data||[]}finally{D.value=!1}},q=async(a,e)=>{const l=1===e?"通过":"驳回",{value:s}=await h.prompt("请输入处理备注",`${l}举报`,{inputPattern:/.+/,inputErrorMessage:"请输入备注"});await t(a.id,e,s),y.success("处理成功"),V()};return o(V),(a,e)=>{const t=d("el-segmented"),l=d("el-table-column"),s=d("el-button"),o=d("el-table"),h=c("loading");return n(),i("div",_,[p("div",k,[e[1]||(e[1]=p("h1",{class:"page-title"},"举报管理",-1)),r(t,{modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=a=>E.value=a),options:[{label:"待处理",value:!0},{label:"全部",value:!1}],onChange:V},null,8,["modelValue"])]),p("div",C,[u((n(),m(o,{data:j.value},{default:v(()=>[r(l,{prop:"id",label:"ID",width:"70"}),r(l,{prop:"type",label:"类型",width:"90",align:"center"},{default:v(({row:a})=>[p("span",x,w(I[a.type]||a.type),1)]),_:1}),r(l,{prop:"targetId",label:"目标ID",width:"90"}),r(l,{prop:"reason",label:"举报原因","min-width":"140","show-overflow-tooltip":""}),r(l,{prop:"description",label:"详细描述","min-width":"180","show-overflow-tooltip":""}),r(l,{label:"状态",width:"90",align:"center"},{default:v(({row:a})=>[p("span",{class:b(["status",["s"+a.status]])},w(U[a.status]),3)]),_:1}),r(l,{label:"操作",width:"160",fixed:"right"},{default:v(({row:a})=>[0===a.status?(n(),i(f,{key:0},[r(s,{type:"primary",size:"small",text:"",onClick:e=>q(a,1)},{default:v(()=>[...e[2]||(e[2]=[g("通过",-1)])]),_:1},8,["onClick"]),r(s,{type:"danger",size:"small",text:"",onClick:e=>q(a,2)},{default:v(()=>[...e[3]||(e[3]=[g("驳回",-1)])]),_:1},8,["onClick"])],64)):(n(),i("span",R,"已处理"))]),_:1})]),_:1},8,["data"])),[[h,D.value]])])])}}},[["__scopeId","data-v-bb9cfe5c"]]);export{j as default};
