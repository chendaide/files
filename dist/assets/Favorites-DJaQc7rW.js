import{_ as a,r as s,n as e,c as t,o as r,h as c,i,j as l,u as o,k as n,F as u,z as d,b as p,t as v,w as f,l as m,E as k}from"./index-DgsTEpUf.js";import{r as y}from"./request-DczqgLPf.js";const g={class:"favorites-page"},h={key:1,class:"favorites-grid"},_=["onClick"],C={class:"product-info"},I={class:"price"},j=a({__name:"Favorites",setup(a){const j=o(),w=s([]),b=async()=>{try{const a=await y.get("/favorites");w.value=a.data||[]}catch(a){}},q=async a=>{try{await function(a){return y.delete(`/favorites/${a}`)}(a),k.success("已取消收藏"),b()}catch(s){}};return e(b),(a,s)=>{const e=l("el-empty"),o=l("el-image"),k=l("el-button"),y=l("el-card");return r(),t("div",g,[c(y,null,{header:i(()=>[...s[0]||(s[0]=[p("span",null,"我的收藏",-1)])]),default:i(()=>[w.value.length?(r(),t("div",h,[(r(!0),t(u,null,d(w.value,a=>(r(),t("div",{key:a.id,class:"favorite-item",onClick:s=>{return e=a.productId,void j.push(`/product/${e}`);var e}},[c(o,{src:a.mainImage,fit:"cover",class:"product-image"},null,8,["src"]),p("div",C,[p("h4",null,v(a.title),1),p("p",I,"¥"+v(a.price),1)]),c(k,{type:"danger",link:"",onClick:f(s=>q(a.productId),["stop"])},{default:i(()=>[...s[1]||(s[1]=[m(" 取消收藏 ",-1)])]),_:1},8,["onClick"])],8,_))),128))])):(r(),n(e,{key:0,description:"暂无收藏"}))]),_:1})])}}},[["__scopeId","data-v-390447aa"]]);export{j as default};
