import{r as e}from"./request-DczqgLPf.js";import{_ as a,r as s,m as t,n as l,c,o as r,h as n,i,j as u,b as d,B as o,t as v,l as p,k as g,F as m,z as y}from"./index-DgsTEpUf.js";const f={class:"credit-page"},_={class:"credit-score"},h={class:"score"},w={class:"credit-info"},b={class:"level"},k={class:"status"},V=a({__name:"CreditCenter",setup(a){const V=s({}),j=s([]),x=t(()=>{const e=V.value.score||100;return e>=120?"excellent":e>=100?"good":e>=80?"normal":e>=60?"low":"danger"}),T=t(()=>{const e=V.value.level;return"优秀"===e?"success":"良好"===e?"":"一般"===e?"warning":"danger"});return l(async()=>{try{const[a,s]=await Promise.all([e.get("/credit/status"),e.get("/credit/logs")]);V.value=a.data||{},j.value=s.data||[]}catch(a){}}),(e,a)=>{const s=u("el-tag"),t=u("el-card"),l=u("el-empty"),q=u("el-timeline-item"),C=u("el-timeline");return r(),c("div",f,[n(t,{class:"credit-overview"},{default:i(()=>[d("div",_,[d("div",{class:o(["score-circle",x.value])},[d("span",h,v(V.value.score||100),1),a[0]||(a[0]=d("span",{class:"label"},"信用分",-1))],2),d("div",w,[d("p",b,[a[1]||(a[1]=p(" 信用等级: ",-1)),n(s,{type:T.value},{default:i(()=>[p(v(V.value.level||"良好"),1)]),_:1},8,["type"])]),d("p",k,[a[2]||(a[2]=p(" 交易状态: ",-1)),n(s,{type:V.value.canTrade?"success":"danger"},{default:i(()=>[p(v(V.value.canTrade?"可正常交易":"信用过低，暂停交易"),1)]),_:1},8,["type"])])])])]),_:1}),n(t,{class:"credit-logs"},{header:i(()=>[...a[3]||(a[3]=[p("信用记录",-1)])]),default:i(()=>[j.value.length?(r(),g(C,{key:1},{default:i(()=>[(r(!0),c(m,null,y(j.value,e=>{return r(),g(q,{key:e.id,type:e.changeValue>0?"success":"danger",timestamp:(a=e.createTime,a?new Date(a).toLocaleString():"")},{default:i(()=>[d("p",null,v(e.reason),1),d("p",{class:o(["change",e.changeValue>0?"positive":"negative"])},v(e.changeValue>0?"+":"")+v(e.changeValue)+" 分 (余额: "+v(e.balanceAfter)+") ",3)]),_:2},1032,["type","timestamp"]);var a}),128))]),_:1})):(r(),g(l,{key:0,description:"暂无记录"}))]),_:1})])}}},[["__scopeId","data-v-6656836b"]]);export{V as default};
