import{_ as a,r as e,n as l,c as t,o as s,b as u,h as o,y as n,j as r,i as d,e as i,U as p,k as c,l as v,t as m,B as g,F as w,C as b,E as f}from"./index-DgsTEpUf.js";import{k as h,l as y}from"./admin-jtg1Qoei.js";import"./request-DczqgLPf.js";const _={class:"page"},k={class:"page-header"},C={class:"filters"},x={class:"card"},V={class:"order-no"},z={class:"ids"},j={class:"amount"},I={key:1,class:"muted"},T={class:"pagination"},U=a({__name:"OrderManage",setup(a){const U=e([]),q=e(!1),D=e(""),E=e(null),M=e(1),N=e(10),$=e(0),B={0:"待完成",1:"已完成",3:"已取消"},F=async()=>{var a,e;q.value=!0;try{const l=await h({keyword:D.value,status:E.value,page:M.value,size:N.value});U.value=(null==(a=l.data)?void 0:a.list)||[],$.value=(null==(e=l.data)?void 0:e.total)||0}finally{q.value=!1}},K=async(a,e)=>{const l="complete"===e?"完成":"取消",{value:t}=await b.prompt(`请输入${l}原因`,"订单介入",{inputPattern:/.+/,inputErrorMessage:"请输入原因"});await y(a.id,e,t),f.success(`订单已${l}`),F()};return l(F),(a,e)=>{const l=r("el-input"),b=r("el-option"),f=r("el-select"),h=r("el-button"),y=r("el-table-column"),L=r("el-table"),O=r("el-pagination"),P=p("loading");return s(),t("div",_,[u("div",k,[e[4]||(e[4]=u("h1",{class:"page-title"},"订单管理",-1)),u("div",C,[o(l,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=a=>D.value=a),placeholder:"搜索订单号",clearable:"",style:{width:"200px"},onKeyup:n(F,["enter"])},null,8,["modelValue"]),o(f,{modelValue:E.value,"onUpdate:modelValue":e[1]||(e[1]=a=>E.value=a),placeholder:"状态",clearable:"",style:{width:"120px"},onChange:F},{default:d(()=>[o(b,{label:"待完成",value:0}),o(b,{label:"已完成",value:1}),o(b,{label:"已取消",value:3})]),_:1},8,["modelValue"]),o(h,{type:"primary",onClick:F},{default:d(()=>[...e[3]||(e[3]=[v("搜索",-1)])]),_:1})])]),u("div",x,[i((s(),c(L,{data:U.value},{default:d(()=>[o(y,{prop:"id",label:"ID",width:"70"}),o(y,{prop:"orderNo",label:"订单号",width:"200"},{default:d(({row:a})=>[u("span",V,m(a.orderNo),1)]),_:1}),o(y,{label:"买家/卖家",width:"120"},{default:d(({row:a})=>[u("div",z,[u("span",null,"买家: "+m(a.buyerId),1),u("span",null,"卖家: "+m(a.sellerId),1)])]),_:1}),o(y,{prop:"amount",label:"金额",width:"100",align:"right"},{default:d(({row:a})=>[u("span",j,"¥"+m(a.amount),1)]),_:1}),o(y,{label:"状态",width:"90",align:"center"},{default:d(({row:a})=>[u("span",{class:g(["status",["s"+a.status]])},m(B[a.status]),3)]),_:1}),o(y,{prop:"createTime",label:"创建时间",width:"170"},{default:d(({row:a})=>[v(m(a.createTime?new Date(a.createTime).toLocaleString():"-"),1)]),_:1}),o(y,{label:"操作",width:"160",fixed:"right"},{default:d(({row:a})=>[0===a.status?(s(),t(w,{key:0},[o(h,{type:"primary",size:"small",text:"",onClick:e=>K(a,"complete")},{default:d(()=>[...e[5]||(e[5]=[v("完成",-1)])]),_:1},8,["onClick"]),o(h,{type:"danger",size:"small",text:"",onClick:e=>K(a,"cancel")},{default:d(()=>[...e[6]||(e[6]=[v("取消",-1)])]),_:1},8,["onClick"])],64)):(s(),t("span",I,"-"))]),_:1})]),_:1},8,["data"])),[[P,q.value]]),u("div",T,[o(O,{"current-page":M.value,"page-size":N.value,total:$.value,background:"",layout:"total, prev, pager, next",onCurrentChange:e[2]||(e[2]=a=>{M.value=a,F()})},null,8,["current-page","page-size","total"])])])])}}},[["__scopeId","data-v-6cdc5f21"]]);export{U as default};
