import{_ as e,r as a,a as s,c as r,o as l,b as t,d as o,t as d,w as n,e as i,v as p,f as u,u as v,g as f,E as c}from"./index-DgsTEpUf.js";import{l as m,r as w}from"./user-BBBixgcQ.js";import"./request-DczqgLPf.js";const h={class:"login-page"},g={class:"login-container"},y={class:"login-form-wrapper"},k={class:"form-container"},x={class:"form-header"},b={class:"form-group"},C={class:"input-wrapper"},B={class:"form-group"},M={class:"input-wrapper"},V=["type"],q={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},I={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},N=["disabled"],U={key:0,class:"spinner"},_={key:1},H={class:"form-row"},z={class:"form-group"},S={class:"input-wrapper"},j={class:"form-group"},A={class:"input-wrapper"},E={class:"form-row"},J={class:"form-group"},L={class:"input-wrapper"},O={class:"form-group"},D={class:"input-wrapper"},F={class:"form-group"},G={class:"input-wrapper"},K=["disabled"],P={key:0,class:"spinner"},Q={key:1},R={class:"form-footer"},T=e({__name:"Login",setup(e){const T=v(),W=f(),X=a(!0),Y=a(!1),Z=a(!1),$=s({username:"",password:""}),ee=s({username:"",password:"",studentId:"",realName:"",email:""}),ae=async()=>{if($.username&&$.password){Y.value=!0;try{const e=await m($);localStorage.setItem("token",e.data.token),localStorage.setItem("userInfo",JSON.stringify(e.data)),c.success("登录成功"),T.push(W.query.redirect||"/")}catch(e){e._handled||c.error(e.message||"登录失败")}finally{Y.value=!1}}else c.warning("请填写完整信息")},se=async()=>{if(ee.username&&ee.password&&ee.studentId&&ee.realName&&ee.email)if(ee.password.length<6)c.warning("密码至少6位");else{Y.value=!0;try{await w(ee),c.success("注册成功，请登录"),X.value=!0}catch(e){e._handled||c.error(e.message||"注册失败")}finally{Y.value=!1}}else c.warning("请填写完整信息")};return(e,a)=>(l(),r("div",h,[t("div",g,[a[25]||(a[25]=o('<div class="login-branding" data-v-04e4fff7><div class="brand-content" data-v-04e4fff7><div class="brand-logo" data-v-04e4fff7><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-04e4fff7><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" data-v-04e4fff7></path><polyline points="9,22 9,12 15,12 15,22" data-v-04e4fff7></polyline></svg></div><h1 data-v-04e4fff7>校园集市</h1><p data-v-04e4fff7>安全可靠的校园二手交易平台</p><div class="brand-features" data-v-04e4fff7><div class="feature" data-v-04e4fff7><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-04e4fff7><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-04e4fff7></path></svg><span data-v-04e4fff7>实名认证，交易安全</span></div><div class="feature" data-v-04e4fff7><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-04e4fff7><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-04e4fff7></path></svg><span data-v-04e4fff7>即时沟通，高效便捷</span></div><div class="feature" data-v-04e4fff7><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-04e4fff7><circle cx="12" cy="12" r="10" data-v-04e4fff7></circle><polyline points="12,6 12,12 16,14" data-v-04e4fff7></polyline></svg><span data-v-04e4fff7>校内交易，省时省力</span></div></div></div></div>',1)),t("div",y,[t("div",k,[t("div",x,[t("h2",null,d(X.value?"欢迎回来":"创建账号"),1),t("p",null,d(X.value?"登录你的账号继续":"注册成为校园集市用户"),1)]),X.value?(l(),r("form",{key:0,onSubmit:n(ae,["prevent"]),class:"form"},[t("div",b,[a[10]||(a[10]=t("label",{for:"username"},"用户名",-1)),t("div",C,[a[9]||(a[9]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1)),i(t("input",{id:"username","onUpdate:modelValue":a[0]||(a[0]=e=>$.username=e),type:"text",placeholder:"请输入用户名",required:""},null,512),[[p,$.username]])])]),t("div",B,[a[14]||(a[14]=t("label",{for:"password"},"密码",-1)),t("div",M,[a[13]||(a[13]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)),i(t("input",{id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>$.password=e),type:Z.value?"text":"password",placeholder:"请输入密码",required:""},null,8,V),[[u,$.password]]),t("button",{type:"button",class:"toggle-password",onClick:a[2]||(a[2]=e=>Z.value=!Z.value)},[Z.value?(l(),r("svg",q,[...a[11]||(a[11]=[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),t("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):(l(),r("svg",I,[...a[12]||(a[12]=[t("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"},null,-1),t("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])]))])])]),t("button",{type:"submit",class:"btn-submit",disabled:Y.value},[Y.value?(l(),r("span",U)):(l(),r("span",_,"登录"))],8,N)],32)):(l(),r("form",{key:1,onSubmit:n(se,["prevent"]),class:"form"},[t("div",H,[t("div",z,[a[16]||(a[16]=t("label",{for:"reg-username"},"用户名",-1)),t("div",S,[a[15]||(a[15]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1)),i(t("input",{id:"reg-username","onUpdate:modelValue":a[3]||(a[3]=e=>ee.username=e),type:"text",placeholder:"请输入用户名",required:""},null,512),[[p,ee.username]])])]),t("div",j,[a[18]||(a[18]=t("label",{for:"reg-password"},"密码",-1)),t("div",A,[a[17]||(a[17]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)),i(t("input",{id:"reg-password","onUpdate:modelValue":a[4]||(a[4]=e=>ee.password=e),type:"password",placeholder:"至少6位密码",minlength:"6",required:""},null,512),[[p,ee.password]])])])]),t("div",E,[t("div",J,[a[20]||(a[20]=t("label",{for:"studentId"},"学号",-1)),t("div",L,[a[19]||(a[19]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),t("path",{d:"M7 8h10M7 12h6"})],-1)),i(t("input",{id:"studentId","onUpdate:modelValue":a[5]||(a[5]=e=>ee.studentId=e),type:"text",placeholder:"请输入学号",required:""},null,512),[[p,ee.studentId]])])]),t("div",O,[a[22]||(a[22]=t("label",{for:"realName"},"真实姓名",-1)),t("div",D,[a[21]||(a[21]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1)),i(t("input",{id:"realName","onUpdate:modelValue":a[6]||(a[6]=e=>ee.realName=e),type:"text",placeholder:"请输入真实姓名",required:""},null,512),[[p,ee.realName]])])])]),t("div",F,[a[24]||(a[24]=t("label",{for:"email"},"邮箱",-1)),t("div",G,[a[23]||(a[23]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),t("polyline",{points:"22,6 12,13 2,6"})],-1)),i(t("input",{id:"email","onUpdate:modelValue":a[7]||(a[7]=e=>ee.email=e),type:"email",placeholder:"请输入邮箱",required:""},null,512),[[p,ee.email]])])]),t("button",{type:"submit",class:"btn-submit",disabled:Y.value},[Y.value?(l(),r("span",P)):(l(),r("span",Q,"注册"))],8,K)],32)),t("div",R,[t("span",null,d(X.value?"还没有账号？":"已有账号？"),1),t("button",{type:"button",class:"btn-link",onClick:a[8]||(a[8]=e=>X.value=!X.value)},d(X.value?"立即注册":"立即登录"),1)])])])])]))}},[["__scopeId","data-v-04e4fff7"]]);export{T as default};
